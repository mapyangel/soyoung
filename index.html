<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì¼ˆí‹± í¬ë¡œìŠ¤ íƒ€ë¡œ (ë°°ì—´ + Hover ì„¤ëª…)</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#121826;
      --card:#101827;
      --line:rgba(255,255,255,.10);
      --text:#e6edf3;
      --muted:#9aa4b2;
      --accent:#7aa2ff;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, "Noto Sans KR", sans-serif;
      background:
        radial-gradient(1100px 650px at 15% 0%, rgba(122,162,255,.12), transparent 62%),
        radial-gradient(900px 520px at 85% 20%, rgba(140,255,196,.08), transparent 60%),
        var(--bg);
      color:var(--text);
    }
    .wrap{
      max-width: 1100px;
      margin: 0 auto;
      padding: 22px 16px 56px;
    }

    header{
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
      margin-bottom: 16px;
      flex-wrap:wrap;
    }
    h1{margin:0; font-size:20px; letter-spacing:.2px;}
    .sub{
      margin-top:6px;
      color:var(--muted);
      font-size:13px;
      line-height:1.45;
    }

    .panel{
      background: rgba(18,24,38,.72);
      border:1px solid var(--line);
      border-radius: 16px;
      padding: 14px;
      backdrop-filter: blur(6px);
      box-shadow: var(--shadow);
      width: min(520px, 100%);
    }
    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin: 0;
    }
    .left{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      width:100%;
    }
    input[type="text"]{
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.25);
      color: var(--text);
      outline:none;
    }
    input[type="text"]::placeholder{color:rgba(154,164,178,.7)}
    .btn{
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(122,162,255,.16);
      color: var(--text);
      cursor:pointer;
      font-weight:700;
    }
    .btn:active{transform: translateY(1px)}
    .toggle{
      display:flex;
      align-items:center;
      gap:8px;
      color: var(--muted);
      font-size: 13px;
      user-select:none;
      margin-left:auto;
    }
    .meta{
      margin-top: 10px;
      color: var(--muted);
      font-size: 12px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }

    /* --- Traditional Celtic Cross Layout --- */
    .board{
      margin-top: 12px;
      background: rgba(18,24,38,.55);
      border:1px solid var(--line);
      border-radius: 18px;
      padding: 16px;
      box-shadow: var(--shadow);
    }

    /* í° í™”ë©´: ì „í†µ ë°°ì¹˜ */
    .layout{
      display:grid;
      gap: 12px;
      align-items:center;
      justify-items:center;

      /* 2ë¸”ë¡: ì™¼ìª½ í¬ë¡œìŠ¤ + ì˜¤ë¥¸ìª½ ìŠ¤íƒœí”„ */
      grid-template-columns: 1fr 0.65fr;
    }

    .cross{
      width: min(740px, 100%);
      aspect-ratio: 16 / 10;
      position: relative;
      border: 1px dashed rgba(255,255,255,.06);
      border-radius: 16px;
      background: rgba(0,0,0,.10);
      overflow:hidden;
    }

    .staff{
      width: min(280px, 100%);
      height: 100%;
      display:grid;
      grid-template-rows: repeat(4, 1fr);
      gap: 12px;
    }

    .slot{
      position:absolute;
      width: 160px;
      height: 110px;
      transform: translate(-50%, -50%);
    }

    /* ì „í†µ ì¼ˆí‹± í¬ë¡œìŠ¤ ìë¦¬ (ëŒ€ëµ ë¹„ìœ¨ ìœ„ì¹˜) */
    .p1{ left: 50%; top: 50%; }               /* 1 ì¤‘ì‹¬ */
    .p2{ left: 50%; top: 50%; transform: translate(-50%,-50%) rotate(90deg); } /* 2 êµì°¨(ê°€ë¡œ) */
    .p3{ left: 50%; top: 82%; }               /* 3 ì•„ë˜ */
    .p4{ left: 20%; top: 50%; }               /* 4 ì™¼ìª½ */
    .p5{ left: 50%; top: 18%; }               /* 5 ìœ„ */
    .p6{ left: 80%; top: 50%; }               /* 6 ì˜¤ë¥¸ìª½ */

    /* ì¹´ë“œ UI */
    .card{
      width: 100%;
      height: 100%;
      background: rgba(16,24,39,.62);
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 10px 10px 9px;
      display:flex;
      flex-direction:column;
      gap:6px;
      justify-content:center;
      position: relative;
    }
    .pos{
      color: var(--muted);
      font-size: 11.5px;
      line-height:1.25;
    }
    .name{
      font-size: 14px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .ori{
      font-size: 11.5px;
      color: rgba(230,237,243,.88);
      display:inline-flex;
      align-items:center;
      gap:6px;
      width:max-content;
      padding: 5px 9px;
      border:1px solid var(--line);
      border-radius: 999px;
      background: rgba(0,0,0,.18);
      margin-top: 2px;
    }
    .dot{
      width:8px;height:8px;border-radius:50%;
      background: var(--accent);
      display:inline-block;
    }

    /* Hover tooltip */
    .tip{
      position: absolute;
      left: 50%;
      bottom: calc(100% + 10px);
      transform: translateX(-50%);
      width: 260px;
      padding: 10px 11px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(12,16,24,.92);
      color: rgba(230,237,243,.95);
      box-shadow: 0 18px 40px rgba(0,0,0,.5);
      display:none;
      z-index: 50;
      pointer-events:none;
    }
    .tip:after{
      content:"";
      position:absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 8px solid transparent;
      border-top-color: rgba(12,16,24,.92);
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.4));
    }
    .tip .t1{font-weight:800; font-size:12.5px; margin-bottom:6px; color: rgba(230,237,243,.98);}
    .tip .t2{font-size:12px; line-height:1.45; color: rgba(230,237,243,.88);}
    .card:hover .tip,
    .card:focus-within .tip{
      display:block;
    }

    /* 2ë²ˆ ì¹´ë“œ(êµì°¨)ë§Œ íšŒì „ë˜ì—ˆìœ¼ë‹ˆ ë‚´ë¶€ í…ìŠ¤íŠ¸ëŠ” ë‹¤ì‹œ ì„¸ì›Œì£¼ê¸° */
    .p2 .card{ transform: rotate(-90deg); }
/* 1ë²ˆ / 2ë²ˆ ì¹´ë“œ êµì°¨ í† ê¸€ (ì•/ë’¤ ì „í™˜) */
.p1 { z-index: 10; }
.p2 { z-index: 11; } /* ê¸°ë³¸: 2ë²ˆ ì¹´ë“œê°€ ìœ„ */

.cross.swap12 .p1 { z-index: 11; }
.cross.swap12 .p2 { z-index: 10; }

    /* ìŠ¤íƒœí”„(7~10) */
    .staff .card{ height: 110px; }
    .staff .card{ position: relative; }

    /* ëª¨ë°”ì¼: ë³´ê¸° ì¢‹ê²Œ ë¦¬ìŠ¤íŠ¸ë¡œ */
    @media (max-width: 880px){
      .layout{ grid-template-columns: 1fr; }
      .cross{ aspect-ratio: auto; position: static; padding: 10px; }
      .slot{ position: static; transform:none; width: 100%; height: auto; }
      .p2{ transform:none; }
      .p2 .card{ transform:none; }
      .cross{
        display:grid;
        grid-template-columns: 1fr;
        gap: 12px;
        border: 0;
        background: transparent;
        padding: 0;
      }
      .card{ height:auto; min-height: 88px; }
      .staff{ grid-template-rows: none; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div style="min-width:260px;">
        <h1>ì¼ˆí‹± í¬ë¡œìŠ¤ íƒ€ë¡œ (ë°°ì—´ + Hover ì„¤ëª…)</h1>
        <div class="sub">
          ì „í†µ ì¼ˆí‹± í¬ë¡œìŠ¤ ë°°ì¹˜ë¡œ ë³´ì—¬ì¤˜. ì¹´ë“œ ìœ„ì— ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ <b>2~3ì¤„ ì„¤ëª…</b>ì´ ë–  ğŸ˜Š
        </div>
      </div>

      <div class="panel">
        <div class="controls">
          <div class="left">
            <input id="q" type="text" placeholder="ì§ˆë¬¸(ì„ íƒ) â€” ì˜ˆ: ì˜¤ëŠ˜ ë‚´ê°€ ì§‘ì¤‘í•  í¬ì¸íŠ¸ëŠ”?" />
          </div>
          <div class="left" style="justify-content:space-between;">
            <button class="btn" id="drawBtn">ì¹´ë“œ ë½‘ê¸°</button>
            <label class="toggle">
              <input id="rev" type="checkbox" checked />
              ì—­ë°©í–¥ í¬í•¨
            </label>
          </div>
        </div>
        <div class="meta">
          <div id="stamp">ì•„ì§ ë½‘ì§€ ì•Šì•˜ì–´.</div>
          <div id="note">â€» ëœë¤ì´ì•¼ ğŸ˜Š</div>
        </div>
      </div>
    </header>

    <div class="board">
      <div class="layout">
        <!-- LEFT: Cross -->
        <div class="cross" id="cross">
          <div class="slot p5"><div class="card" id="card5" tabindex="0"></div></div>
          <div class="slot p4"><div class="card" id="card4" tabindex="0"></div></div>
          <div class="slot p1"><div class="card" id="card1" tabindex="0"></div></div>
          <div class="slot p2"><div class="card" id="card2" tabindex="0"></div></div>
          <div class="slot p6"><div class="card" id="card6" tabindex="0"></div></div>
          <div class="slot p3"><div class="card" id="card3" tabindex="0"></div></div>
        </div>

        <!-- RIGHT: Staff (7~10) -->
        <div class="staff" id="staff">
          <div class="card" id="card10" tabindex="0"></div>
          <div class="card" id="card9" tabindex="0"></div>
          <div class="card" id="card8" tabindex="0"></div>
          <div class="card" id="card7" tabindex="0"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- Deck (78) ---
    const MAJOR = [
      "0 ë°”ë³´","1 ë§ˆë²•ì‚¬","2 ì—¬ì‚¬ì œ","3 ì—¬í™©ì œ","4 í™©ì œ","5 êµí™©",
      "6 ì—°ì¸","7 ì „ì°¨","8 í˜","9 ì€ë‘”ì","10 ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´","11 ì •ì˜",
      "12 ë§¤ë‹¬ë¦° ì‚¬ëŒ","13 ì£½ìŒ","14 ì ˆì œ","15 ì•…ë§ˆ","16 íƒ‘","17 ë³„",
      "18 ë‹¬","19 íƒœì–‘","20 ì‹¬íŒ","21 ì„¸ê³„"
    ];
    const RANKS = ["ì—ì´ìŠ¤","2","3","4","5","6","7","8","9","10","í˜ì´ì§€","ë‚˜ì´íŠ¸","í€¸","í‚¹"];
    const SUITS = ["ì™„ë“œ","ì»µ","ì†Œë“œ","íœíƒ€í´"];

    function buildDeck(){
      const deck = [];
      MAJOR.forEach(x => deck.push(x));
      for(const s of SUITS){
        for(const r of RANKS){
          deck.push(`${s} ${r}`);
        }
      }
      return deck;
    }

    // --- Celtic Cross positions (1~10) ---
    const POS = {
      1: "1. í˜„ì¬(ìƒí™©ì˜ í•µì‹¬)",
      2: "2. ì¥ì• /ë„ì „(êµì°¨)",
      3: "3. ë¬´ì˜ì‹/ê·¼ì›(ë°”íƒ•)",
      4: "4. ê³¼ê±°(ì§€ë‚˜ê°„ ì˜í–¥)",
      5: "5. ì˜ì‹/ëª©í‘œ(ìœ„)",
      6: "6. ê°€ê¹Œìš´ ë¯¸ë˜(ì•)",
      7: "7. ë‚˜(íƒœë„/ì…ì¥)",
      8: "8. ì£¼ë³€/í™˜ê²½(íƒ€ì¸/ìƒí™©)",
      9: "9. í¬ë§/ë‘ë ¤ì›€",
      10:"10. ê²°ê³¼(ì ì¬ì  ê²°ë§)"
    };

    // --- RNG helpers (crypto if available) ---
    function rand(){
      if (window.crypto && crypto.getRandomValues){
        const a = new Uint32Array(1);
        crypto.getRandomValues(a);
        return a[0] / 4294967296;
      }
      return Math.random();
    }
    function shuffle(arr){
      for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(rand() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }
    function stamp(){
      const d = new Date();
      const pad = (n)=> String(n).padStart(2,"0");
      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
    }

    // --- Meaning generator (2~3 lines) ---
    // ë©”ì´ì €ëŠ” ê°„ë‹¨í•œ 3ì¤„ ê³ ì •, ë§ˆì´ë„ˆëŠ” ìŠˆíŠ¸+ë­í¬ ì¡°í•©ìœ¼ë¡œ 2~3ì¤„ ìƒì„±
    const MAJOR_MEAN = {
      "0 ë°”ë³´": ["ìƒˆ ì¶œë°œ, ê°€ë²¼ìš´ ìš©ê¸°.", "ê³„íšë³´ë‹¤ ê²½í—˜ì´ ì•ì„œëŠ” íë¦„.", "í•œ ê±¸ìŒì€ â€˜ëª¨í—˜â€™ì´ ë  ìˆ˜ ìˆì–´."],
      "1 ë§ˆë²•ì‚¬": ["ì˜ì§€ì™€ ì‹¤í–‰ë ¥.", "ì†ì— ì¥” ìì›ìœ¼ë¡œ ì‹œì‘í•˜ê¸°.", "ë§/ì„ íƒì´ í˜„ì‹¤ì„ ë§Œë“ ë‹¤."],
      "2 ì—¬ì‚¬ì œ": ["ì§ê°, ìˆ¨ì€ ì •ë³´.", "ì§€ê¸ˆì€ ê´€ì°°ì´ í˜ì´ ë¼.", "ì¡°ìš©í•œ í™•ì‹ ì„ ë¯¿ì–´."],
      "3 ì—¬í™©ì œ": ["í’ìš”, ëŒë´„, ì°½ì¡°.", "ì•ˆì •ê³¼ ì„±ì¥ì˜ ê¸°ìš´.", "ë°›ì•„ë“¤ì´ê³  í‚¤ìš°ëŠ” ì‹œê°„."],
      "4 í™©ì œ": ["êµ¬ì¡°, ì±…ì„, í†µì œ.", "ê²½ê³„ì™€ ê·œì¹™ì´ í•„ìš”í•´.", "ê¸°ë°˜ì„ ë‹¤ì§€ë©´ í”ë“¤ë¦¼ì´ ì¤„ì–´."],
      "5 êµí™©": ["ì „í†µ, ì¡°ì–¸, ê°€ì¹˜.", "ì›ì¹™ì„ í™•ì¸í•˜ëŠ” ìë¦¬.", "ë°°ì›€/ê°€ë¥´ì¹¨ì´ ê¸¸ì„ ì—°ë‹¤."],
      "6 ì—°ì¸": ["ê´€ê³„/ì„ íƒì˜ ì¹´ë“œ.", "ë§ˆìŒê³¼ ê°€ì¹˜ì˜ ì •ë ¬.", "â€˜ë¬´ì—‡ì„ íƒí• ì§€â€™ê°€ í•µì‹¬."],
      "7 ì „ì°¨": ["ì „ì§„, ìŠ¹ë¶€, ì¶”ì§„.", "ì§‘ì¤‘í•˜ë©´ ê¸¸ì´ ì—´ë¦°ë‹¤.", "ë°©í–¥ë§Œ ìƒì§€ ë§ˆ."],
      "8 í˜": ["ë¶€ë“œëŸ¬ìš´ ê°•í•¨.", "ì°¸ì„ì„±/ìê¸°ì¡°ì ˆ.", "ì„¤ë“ì€ í˜ë³´ë‹¤ ê¹Šë‹¤."],
      "9 ì€ë‘”ì": ["ë‚´ë©´ íƒìƒ‰, ì •ë¦¬.", "í˜¼ì ìƒê°í•  ì‹œê°„ì´ í•„ìš”.", "ë‹µì€ ì¡°ìš©í•œ ê³³ì— ìˆë‹¤."],
      "10 ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´": ["ì „í™˜ì , íƒ€ì´ë°.", "íë¦„ì´ ë°”ë€ŒëŠ” ìˆœê°„.", "ì¡ì„ ê±´ ì¡ê³  ë†“ì„ ê±´ ë†“ê¸°."],
      "11 ì •ì˜": ["ê· í˜•, íŒë‹¨, ì •ë¦¬.", "ê³µì •í•¨ì´ ê¸°ì¤€ì´ ë¼.", "ì›ì¸ê³¼ ê²°ê³¼ë¥¼ ë§ˆì£¼í•˜ê¸°."],
      "12 ë§¤ë‹¬ë¦° ì‚¬ëŒ": ["ì ì‹œ ë©ˆì¶¤, ê´€ì  ì „í™˜.", "ì„œë‘ë¥´ì§€ ì•Šì•„ë„ ë¼.", "ë‹¤ë¥´ê²Œ ë³´ë©´ í•´ë‹µì´ ë³´ì—¬."],
      "13 ì£½ìŒ": ["ëê³¼ ì‹œì‘.", "ì •ë¦¬/ì²­ì‚°ì˜ í˜.", "ë‚¡ì€ ê²ƒì„ ë†“ì•„ì•¼ ìƒˆë¡œ ì˜¨ë‹¤."],
      "14 ì ˆì œ": ["ì¡°ìœ¨, ì ˆì¶©, íšŒë³µ.", "ê·¹ë‹¨ë³´ë‹¤ ì¤‘ê°„.", "ì²œì²œíˆ ì„ì–´ì„œ ê· í˜• ì¡ê¸°."],
      "15 ì•…ë§ˆ": ["ì§‘ì°©, ìœ í˜¹, ë§¤ë“­.", "ìŠ¤ìŠ¤ë¡œ ë¬¶ì¸ ëˆì„ ë³´ê¸°.", "ìš•ë§ì„ â€˜ê´€ë¦¬â€™í•˜ëŠ” ê²Œ í•µì‹¬."],
      "16 íƒ‘": ["ê¸‰ë³€, ë¶•ê´´, ê°ì„±.", "ê¸°ì¡´ í‹€ì´ í”ë“¤ë¦´ ìˆ˜ ìˆì–´.", "ë¬´ë„ˆì§„ ìë¦¬ì— ìƒˆ ì„¤ê³„ê°€ ì˜¨ë‹¤."],
      "17 ë³„": ["í¬ë§, ë°©í–¥, íšŒë³µ.", "ë©€ë¦¬ ë´ë„ ê´œì°®ì•„.", "ì‘ì€ ë¹›ì´ ê¸¸ì„ ë§Œë“ ë‹¤."],
      "18 ë‹¬": ["ë¶ˆì•ˆ, ì°©ê°, ë¬´ì˜ì‹.", "í™•ì‹  ì „ì— í™•ì¸ì´ í•„ìš”.", "ê°ì •ì˜ ê·¸ë¦¼ìë¥¼ ë‹¤ë£¨ê¸°."],
      "19 íƒœì–‘": ["ëª…í™•í•¨, í™œë ¥, ì„±ê³µ.", "ë“œëŸ¬ë‚˜ë©´ ì‰¬ì›Œì ¸.", "ì¦ê±°ì›€ì´ ì—ë„ˆì§€ê°€ ëœë‹¤."],
      "20 ì‹¬íŒ": ["ë¶€ë¦„, ê²°ë‹¨, ì¬í‰ê°€.", "ì •ë¦¬í•˜ê³  ìƒˆë¡œ ì„ ì–¸í•˜ê¸°.", "ê³¼ê±°ë¥¼ í†µê³¼í•´ ì•ìœ¼ë¡œ."],
      "21 ì„¸ê³„": ["ì™„ì„±, í†µí•©, ë§ˆë¬´ë¦¬.", "ì‚¬ì´í´ì˜ ê²°ë¡ .", "ì •ë¦¬ë˜ë©´ ë‹¤ìŒ ë‹¨ê³„ê°€ ì—´ë¦°ë‹¤."]
    };

    const SUIT_MEAN = {
      "ì™„ë“œ": ["ì—´ì •/ì˜ì§€", "ì‹œì‘Â·ì¶”ì§„", "ì—ë„ˆì§€ì˜ ë°©í–¥"],
      "ì»µ": ["ê°ì •/ê´€ê³„", "ê³µê°Â·êµë¥˜", "ë§ˆìŒì˜ íë¦„"],
      "ì†Œë“œ": ["ìƒê°/íŒë‹¨", "ì •ë³´Â·ì†Œí†µ", "ê²°ì •ê³¼ ì§„ì‹¤"],
      "íœíƒ€í´": ["í˜„ì‹¤/ìì›", "ëˆÂ·ì¼Â·ëª¸", "ê¸°ë°˜ê³¼ ê¾¸ì¤€í•¨"]
    };

    const RANK_MEAN = {
      "ì—ì´ìŠ¤": ["ì”¨ì•—ì´ ìƒê¸´ë‹¤", "ì²« ë¶ˆê½ƒ", "ì¶œë°œì "],
      "2": ["ê· í˜•Â·ì„ íƒ", "ì–‘ë©´", "ì¡°ìœ¨ í•„ìš”"],
      "3": ["í™•ì¥", "í˜‘ì—…/ì—°ê²°", "ì²« ê²°ê³¼"],
      "4": ["ê³ ì •/ì•ˆì •", "ìœ ì§€", "ë©ˆì¶¤ë„ ì„ íƒ"],
      "5": ["ê°ˆë“±/í”ë“¤ë¦¼", "ì‹œí—˜", "ì¬ì •ë ¬ í•„ìš”"],
      "6": ["íšŒë³µ/ì§„ì „", "ë„ì›€", "íë¦„ì´ ì¢‹ì•„ì§"],
      "7": ["ì ê²€/ë°©ì–´", "ê³ ì§‘", "ì¤‘ê°„í‰ê°€"],
      "8": ["ì†ë„/ì§‘ì¤‘", "ë°˜ë³µÂ·ìˆ™ë ¨", "ì§„ë„ ë‚˜ê°"],
      "9": ["ì„±ì·¨/ë‹¨ë…", "ì¶©ë¶„í•¨", "ë§ˆë¬´ë¦¬ ì§ì „"],
      "10": ["ì™„ì„±/ê³¼ë¶€í•˜", "ëì˜ ë¬´ê²Œ", "ì •ë¦¬ì˜ í•„ìš”"],
      "í˜ì´ì§€": ["ì†Œì‹/í˜¸ê¸°ì‹¬", "í•™ìŠµ", "ì´ˆê¸° ë‹¨ê³„"],
      "ë‚˜ì´íŠ¸": ["ëŒíŒŒ/ì´ë™", "í–‰ë™", "ì†ë„ ì¡°ì ˆ"],
      "í€¸": ["ë‚´ë©´ì˜ ìˆ™ì„±", "ë³´ì‚´í•Œ", "ê°ì •Â·ì§€í˜œ"],
      "í‚¹": ["í†µì œ/ì±…ì„", "ê²°ì •ê¶Œ", "ì„±ê³¼ ê´€ë¦¬"]
    };

    function meaningLines(cardName, ori){
      // Major
      if (MAJOR_MEAN[cardName]){
        const lines = MAJOR_MEAN[cardName].slice();
        if (ori === "ì—­ë°©í–¥") {
          // ì—­ë°©í–¥ì€ â€œì§€ì—°/ë‚´ë©´í™”/ê³¼ì‰â€ ëŠë‚Œë§Œ ì‚´ì§ ë§ë¶™ì„
          lines[1] = "íë¦„ì´ ì§€ì—°ë˜ê±°ë‚˜ ë‚´ë©´ì—ì„œ ì‘ë™í•´.";
          lines[2] = "ê³¼í•˜ê±°ë‚˜ ë§‰íŒ ë¶€ë¶„ì„ ì¡°ìš©íˆ ì •ë¦¬í•´ë´.";
        }
        return lines.slice(0,3);
      }

      // Minor: "ìŠˆíŠ¸ ë­í¬"
      const parts = cardName.split(" ");
      if (parts.length >= 2){
        const suit = parts[0];
        const rank = parts[1];
        const s = SUIT_MEAN[suit];
        const r = RANK_MEAN[rank];
        if (s && r){
          const base1 = `${suit}ëŠ” ${s[0]}ì˜ ì˜ì—­ì´ì•¼.`;
          const base2 = `${rank}ëŠ” ${r[0]} / ${r[1]}ì˜ ê²°ì„ ê°€ì ¸.`;
          const base3 = (ori === "ì •ë°©í–¥")
            ? `ì§€ê¸ˆì€ ${s[2]}ì„(ë¥¼) ${r[2]} ìª½ìœ¼ë¡œ ì¨ë³´ë©´ ì¢‹ì•„.`
            : `ì—­ë°©í–¥ì´ë¼ë©´ ${r[2]}ì´(ê°€) ë§‰íˆê±°ë‚˜ ê³¼í•´ì§ˆ ìˆ˜ ìˆì–´.`;
          return [base1, base2, base3];
        }
      }

      return ["í•´ì„ ë°ì´í„° ì¤€ë¹„ì¤‘ì´ì•¼.", "ê·¸ë˜ë„ ë°°ì—´ ìì²´ë¡œ ì˜ë¯¸ë¥¼ ëŠê»´ë´.", "í•„ìš”í•˜ë©´ ì†Œì˜ì´ê°€ ë” ì±„ì›Œì¤„ê²Œ ğŸ˜Š"];
    }

    function draw(){
      const deck = shuffle(buildDeck());
      const allowReversed = document.getElementById("rev").checked;

      const spread = {};
      for(let i=1;i<=10;i++){
        const name = deck.pop();
        const reversed = allowReversed ? (rand() < 0.5) : false;
        spread[i] = {
          pos: POS[i],
          name,
          ori: reversed ? "ì—­ë°©í–¥" : "ì •ë°©í–¥"
        };
      }
      return spread;
    }

    function renderCard(el, data){
      const lines = meaningLines(data.name, data.ori);
      el.innerHTML = `
        <div class="pos">${data.pos}</div>
        <div class="name">${data.name}</div>
        <div class="ori"><span class="dot"></span>${data.ori}</div>

        <div class="tip" role="tooltip">
          <div class="t1">${data.name} Â· ${data.ori}</div>
          <div class="t2">â€¢ ${lines[0]}<br>â€¢ ${lines[1]}<br>â€¢ ${lines[2]}</div>
        </div>
      `;
    }

    function renderEmpty(){
      for(let i=1;i<=10;i++){
        const el = document.getElementById(`card${i}`);
        el.innerHTML = `
          <div class="pos">${POS[i]}</div>
          <div class="name">(ë¹„ì–´ìˆìŒ)</div>
        `;
      }
    }

    document.getElementById("drawBtn").addEventListener("click", ()=>{
      const spread = draw();
      for(let i=1;i<=10;i++){
        renderCard(document.getElementById(`card${i}`), spread[i]);
      }

      const q = document.getElementById("q").value.trim();
      document.getElementById("stamp").textContent =
        (q ? `ì§ˆë¬¸: ${q} Â· ` : "") + `ë½‘ì€ ì‹œê°„: ${stamp()}`;
      document.getElementById("note").textContent = "â€» ì¹´ë“œ/ì‹œê°„ê³¼ ë¬´ê´€í•˜ê²Œ ëœë¤ì´ì•¼ ğŸ˜Š";
    });

    renderEmpty();
    // 1ë²ˆ / 2ë²ˆ ì¹´ë“œ í´ë¦­ ì‹œ ì•ë’¤ êµì°¨ í† ê¸€
document.getElementById("card1").addEventListener("click", () => {
  document.getElementById("cross").classList.toggle("swap12");
});

document.getElementById("card2").addEventListener("click", () => {
  document.getElementById("cross").classList.toggle("swap12");
});

  </script>
</body>
</html>
